import { GetServerSidePropsContext } from 'next';
import Head from 'next/head';
import Hero from '../components/home/Hero';
import {getSelectorsByUserAgent} from 'react-device-detect';
import TeachProcess from '../components/home/teach-process/teach-process';
import Events from '../components/home/thematic-events/events';
import FreeClass from '../components/home/free-class/free-class';
import { IDeviceType } from '../types/data';

export default function Home({ isMobileOnly, isTablet, isDesktop }: IDeviceType) {
    
    return (
        <>
            <Head>
                <title>Eager Beaver Language School</title>
                <meta name='description' content='Generated by create next app' />
                <meta name='viewport' content='width=device-width, initial-scale=1' />
                <link rel='icon' href='/favicon.ico' />
            </Head>
            <Hero isMobileOnly={isMobileOnly} />
            <TeachProcess />
            <Events isMobileOnly={isMobileOnly} isTablet={isTablet} isDesktop={isDesktop} />
            <FreeClass isMobileOnly={isMobileOnly} isTablet={isTablet} isDesktop={isDesktop} />
        </>
    );
}
export async function getServerSideProps({ req, res }: GetServerSidePropsContext) {
    const userAgent = req.headers['user-agent'] || '';
    const { isMobileOnly, isTablet, isDesktop  } = getSelectorsByUserAgent(userAgent);

    return {
        props: { isMobileOnly, isTablet, isDesktop },
    };
}